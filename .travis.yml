language: python
cache: pip
python:
- 3.6.5
before_install:
- openssl aes-256-cbc -K $encrypted_382e802577bb_key -iv $encrypted_382e802577bb_iv
  -in .travis/travis_rsa.enc -out .travis/travis_rsa -d
- cd biasimpacter
install:
- pip install -r requirements.txt
script: 
  - pytest
  - cd ${TRAVIS_BUILD_DIR}
  - eval "$(ssh-agent -s)"
  - chmod 600 .travis/travis_rsa
  - echo -e "Host $SERVER_IP_ADDRESS\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
  - ssh-add .travis/travis_rsa
  - ssh -i .travis/travis_rsa ${USER}@${IP} pwd
deploy:
  skip_cleanup: true
  provider: script
  script: deploy.sh
  on:
    branch: master

